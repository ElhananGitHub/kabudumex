<!DOCTYPE html>
<html lang="es">

<head id="header">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kabudumex : Prove</title>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback" />
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css" />
    <!-- Select2 -->
    <link rel="stylesheet" href="plugins/select2/css/select2.min.css" />
    <link rel="stylesheet" href="plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css" />
    <!-- DataTables -->
    <link rel="stylesheet" href="plugins/datatables-bs4/css/dataTables.bootstrap4.min.css" />
    <link rel="stylesheet" href="plugins/datatables-responsive/css/responsive.bootstrap4.min.css" />
    <link rel="stylesheet" href="plugins/datatables-select/css/select.bootstrap4.min.css" />
    <link rel="stylesheet" href="plugins/datatables-buttons/css/buttons.bootstrap4.min.css" />
    <!-- Theme style -->
    <link rel="stylesheet" href="public/css/adminlte.css" />

    <!-- Custom style -->
    <link rel="stylesheet" href="public/css/custom.css" />
</head>

<body class="sidebar-mini layout-fixed sidebar-collapse">

    <div id="loading1" class="loading-invisible" style="display:none;">
        <div class="loading-spinner">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                style="margin: auto; background: none; display: block; shape-rendering: auto;" width="204px"
                height="204px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <circle cx="50" cy="50" r="0" fill="none" stroke="#013369" stroke-width="3">
                    <animate attributeName="r" repeatCount="indefinite" dur="1.282051282051282s" values="0;40"
                        keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="0s"></animate>
                    <animate attributeName="opacity" repeatCount="indefinite" dur="1.282051282051282s" values="1;0"
                        keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="0s"></animate>
                </circle>
                <circle cx="50" cy="50" r="0" fill="none" stroke="#00263d" stroke-width="3">
                    <animate attributeName="r" repeatCount="indefinite" dur="1.282051282051282s" values="0;40"
                        keyTimes="0;1" keySplines="0 0.2 0.8 1" calcMode="spline" begin="-0.641025641025641s"></animate>
                    <animate attributeName="opacity" repeatCount="indefinite" dur="1.282051282051282s" values="1;0"
                        keyTimes="0;1" keySplines="0.2 0 0.8 1" calcMode="spline" begin="-0.641025641025641s"></animate>
                </circle>
                <!-- [ldio] generated by https://loading.io/ -->
            </svg>
            <span id="loadig-text-2" class="loading-text c-white">Procesando, espere un momento....</span>
        </div>
    </div>

    <div id="wrapper" class="wrapper">
        <nav id="navtop" class="main-header navbar navbar-expand navbar-white navbar-light"></nav>

        <aside id="navaside" class="main-sidebar sidebar-light-primary elevation-4"></aside>

        <div class="content-wrapper">
            <div id="breadcrumb" class="content-header"></div>
            <section id="section" class="content">
                <div class="container-fluid">
                    <div class="row justify-content-center">
                        <!-- left column -->
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header">
                                    <div class="row">
                                        <div class="col-6">
                                            <button class="btn btn-primary" data-toggle="modal" data-target="#modal-add"
                                                onclick="limpiarModal(); selectCliente(false); selectCatalogos(); selectPublicacionesML(1);">
                                                <i class="fas fa-plus"></i> Generar Traspaso a MercadoLibre
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            
                                        </div>
                                    </div>
                                </div>
                                <!-- /.card-header -->

                                <div class="col-12">
                                    <div id="divTabla" class="card-body"></div>
                                </div>

                                <!-- Modal -->
                                <div class="modal fade" id="myModal" role="dialog">
                                    <div class="modal-dialog">
                                        <!-- Modal content-->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title" id="modalTitle">
                                                    Agregar o Editar
                                                </h4>
                                                <button type="button" class="close" data-dismiss="modal"></button>
                                            </div>
                                            <div class="modal-body" id="myModalBody">
                                                <form id="modalForm" class="container-fluid"></form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">
                                                    Close
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Snackbar de alertas -->
                                <div id="snackbar"></div>

                                <p id="testData"></p>
                                <p id="testData2"></p>
                                <p id="datosCompletos" hidden></p>
                                <p id="datosFormularios" hidden></p>

                                <table id="tabla2" class="display"></table>

                            </div>
                            <!-- /.card -->
                        </div>
                        <!-- /.col -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.container-fluid -->
            </section>
        </div>
    </div>
    <canvas id="barcode"></canvas>


    <!-- modal -->
    <div class="modal fade" id="modal-add">
        <div class="modal-dialog modal-xl" style="max-width: 80% !important;">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Traspaso</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <section class="content">
                        <div class="container-fluid">
                            <div class="row justify-content-center">
                                <!-- left column -->
                                <div class="col-12">
                                    <!-- general form elements -->
                                    <div id="card-bg-title" class="card card-primary">
                                        <div class="card-header">
                                            <h3 id="card-title" class="card-title">
                                                Agregar Traspaso
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->

                                        <!-- form start -->
                                        <form id="frmVentaAdd" autocomplete="off">
                                            <div class="card-body">
                                                <div id="callout-bg-form" class="callout callout-info">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Cliente</label>
                                                                <select class="form-control select2" id="clienteList"
                                                                    required></select>
                                                            </div>
                                                        </div>




                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Empresa</label>
                                                                <select class="form-control select2" id="empresaList"
                                                                    required>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label
                                                                    for="exampleFormControlTextarea1">Comentarios</label>
                                                                <textarea class="form-control" id="txtComentarios"
                                                                    rows="3"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-12">
                                                            <table class="table table-striped table-bordered"
                                                                style="width: 100%" id="catalogosTable">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Categoría</th>
                                                                        <th>Producto</th>
                                                                        <th>Variación</th>
                                                                        <th>Cantidad (Bultos)</th>
                                                                        <th>Publicación MercadoLibre</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr id="td_1">
                                                                        <td>
                                                                            <select
                                                                                class="form-control categoriaSelect select2"
                                                                                id="categoriaList_1"
                                                                                onchange="selectProducto(this.value, 1)"></select>
                                                                        </td>
                                                                        <td>
                                                                            <select
                                                                                class="form-control productoSelect select2"
                                                                                id="productoList_1"
                                                                                onchange="selectVariacion(this.value, 1)"></select>
                                                                        </td>
                                                                        <td>
                                                                            <select
                                                                                class="form-control variacionSelect select2"
                                                                                id="variacionList_1"
                                                                                onchange="selectShowCantidad(this.value, 1)"></select>
                                                                        </td>
                                                                        <td>
                                                                            <input type="number"
                                                                                class="form-control cantidadInput"
                                                                                id="cantidad_1" />
                                                                        </td>
                                                                        <td>
                                                                            <select
                                                                                class="form-control publicacionMLSelect select2"
                                                                                id="publicacionMlList_1"
                                                                                required></select>
                                                                        </td>
                                                                        <td>
                                                                            <button class="btn btn-danger"
                                                                                onclick="borrarProductoAgregado(1)">
                                                                                <i class="far fa-trash-alt"></i>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="col-3">
                                                            <button type="button" class="form-control btn btn-primary"
                                                                onclick="agregarCampos()">
                                                                <i class="fas fa-plus"></i>
                                                            </button>
                                                        </div>
                                                        <div class="col-3">
                                                            <label for="fileExcel" class="btn btn-success">
                                                                <i class="fas fa-file-excel"></i></label>
                                                            <input type="file" id="fileExcel" style="display: none"
                                                                onchange="cargarExcelProductosMasivos()">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.card-body -->
                                        </form>
                                    </div>
                                    <!-- /.card -->
                                </div>
                                <!--/.col (left) -->
                                <!-- right column -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.container-fluid -->
                    </section>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Cerrar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarOrden()">
                        Guardar Órden
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal-add -->


    <!-- modal-detalle -->
    <div class="modal fade" id="modal-detalle">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Detalle Mercancia</h4>
                </div>
                <div class="modal-body">
                    <h4><b>Resumen:</b></h4>
                    <div id="divtblResumen" class="card-body"></div>

                    <h4><b>Desglose:</b></h4>
                    <div id="divtblDetalle" class="card-body"></div>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Cerrar
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal-detalle -->



    <!-- modal-editar -->
    <div class="modal fade" id="modal-editar">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Venta</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <section class="content">
                        <div class="container-fluid">
                            <div class="row justify-content-center">
                                <!-- left column -->
                                <div class="col-12">
                                    <!-- general form elements -->
                                    <div id="card-bg-title" class="card card-primary">
                                        <div class="card-header">
                                            <h3 id="card-title" class="card-title">
                                                Editar Órden de Venta
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->

                                        <!-- form start -->
                                        <form id="frmVentaAdd" autocomplete="off">
                                            <div class="card-body">
                                                <div id="callout-bg-form" class="callout callout-info">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Cliente</label>
                                                                <select class="form-control" id="clienteList_editar"
                                                                    required></select>
                                                            </div>
                                                        </div>

                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Empresa</label>
                                                                <select class="form-control" id="empresaList_editar"
                                                                    required></select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label
                                                                    for="exampleFormControlTextarea1">Comentarios</label>
                                                                <textarea class="form-control"
                                                                    id="txtComentarios_editar" rows="3"></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Estatus</label>
                                                                <select class="form-control" id="estatus_editar"
                                                                    required>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <table class="table table-striped table-bordered"
                                                                    style="width: 100%" id="catalogosTable_editar">

                                                                    <thead>
                                                                        <tr>
                                                                            <th>Categoría</th>
                                                                            <th>Producto</th>
                                                                            <th>Variación</th>
                                                                            <th>Cantidad (Bultos)</th>
                                                                            <th>Publicación MercadoLibre</th>
                                                                            <th>Accion</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody></tbody>
                                                                </table>
                                                            </div>
                                                            <div class="col-3">
                                                                <button type="button"
                                                                    class="form-control btn btn-primary"
                                                                    onclick="agregarCamposEditar()">
                                                                    <i class="fas fa-plus"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- /.card-body -->
                                        </form>
                                    </div>
                                    <!-- /.card -->
                                </div>
                                <!--/.col (left) -->
                                <!-- right column -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.container-fluid -->
                    </section>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Cerrar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarOrdenEditada()">
                        Editar Órden
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal-editar -->




    <!-- modal-editarCerrado -->
    <div class="modal fade" id="modal-editarCerrado">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Venta</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <section class="content">
                        <div class="container-fluid">
                            <div class="row justify-content-center">
                                <!-- left column -->
                                <div class="col-12">
                                    <!-- general form elements -->
                                    <div id="card-bg-title" class="card card-primary">
                                        <div class="card-header">
                                            <h3 id="card-title" class="card-title">
                                                Editar Órden de Venta
                                            </h3>
                                        </div>
                                        <!-- /.card-header -->

                                        <!-- form start -->
                                        <form id="frmVentaAdd" autocomplete="off">
                                            <div class="card-body">
                                                <div id="callout-bg-form" class="callout callout-info">
                                                    <div class="row">
                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Condiciones de pago</label>
                                                                <select class="form-control"
                                                                    id="condicionesPago_editarC" required></select>
                                                            </div>
                                                        </div>

                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Empresa</label>
                                                                <select class="form-control" id="empresaList_editarC"
                                                                    required></select>
                                                            </div>
                                                        </div>

                                                        <div class="col-6">
                                                            <div class="form-group">
                                                                <label>Comentarios</label>
                                                                <textarea rows="3" cols="50" class="form-control"
                                                                    id="comentariosCerrado"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- /.card-body -->
                                        </form>
                                    </div>
                                    <!-- /.card -->
                                </div>
                                <!--/.col (left) -->
                                <!-- right column -->
                            </div>
                            <!-- /.row -->
                        </div>
                        <!-- /.container-fluid -->
                    </section>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Cerrar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="guardarOrdenEditadaCerrado()">
                        Editar Órden
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal-editarCerrado -->



    <!-- modal-subirImagen -->
    <div class="modal fade" id="modal-subirImagen">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Orden de venta firmada</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label>Foto</label>
                                <input type="file" class="form-control" id="fotoVenta" onchange="mostrarImagen(this)" />
                                <img id="imgFotoVenta" width="150" height="150"
                                    style="border: 1px solid #333333; margin-top: 10px" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer justify-content-between">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Cerrar
                    </button>
                    <button type="button" class="btn btn-primary" onclick="subirImagen()">
                        Subir Imagen
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- modal-subirImagen -->



    <script src="plugins/jquery/jquery.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <!-- Firebase - Custom -->
    <script src="estilos.js"></script>
    <script src="firebase.js"></script>
    <script src="verifyAuth.js"></script>
    <script src="logsCustom.js"></script>
    <script src="index.js"></script>


    <!-- Bootstrap -->
    <script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables  & Plugins -->
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script src="plugins/datatables-select/js/dataTables.select.min.js"></script>
    <script src="plugins/datatables-select/js/select.bootstrap4.min.js"></script>
    <script src="plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
    <script src="plugins/jszip/jszip.min.js"></script>
    <script src="plugins/pdfmake/pdfmake.min.js"></script>
    <script src="plugins/pdfmake/vfs_fonts.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.html5.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.print.min.js"></script>
    <script src="plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
    <!-- AdminLTE -->
    <script src="public/js/adminlte.js"></script>
    <!-- Sweetalert -->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- Excel -->
    <script type="text/javascript" src="public/js/xlsx.full.min.js"></script>
    <!-- QR -->
    <script type="text/javascript" src="public/js/qrious.min.js"></script>
    <!-- Select2 -->
    <script src="plugins/select2/js/select2.min.js"></script>
    <script src="generalTools.js"></script>

    <!-- JsBarcode -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.0/JsBarcode.all.min.js"></script>
    <!-- pdfmake -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/pdfmake.min.js"></script>
    <script src="createBarcodes.js"></script>

    <script src="public/js/custom.js"></script>
    <script src="MercadoLibreTraspasos.js"></script>

</body>

</html>